<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WiSDK: WiSDK</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WiSDK
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
   <div id="projectbrief">Wi SDK Libraries</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">WiSDK </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>About</h2>
<p>This Wi SDK allows integration of native mobile apps with the Welcome Interruption (Wi) servers. It allows for the collecting location information from a mobile device to the Wi Servers and allow the receipt of notifications from Wi servers.</p>
<p>The SDK also provides various interfaces to the REST api suported by the Wi servers.</p>
<p>The SDK is available for IOS and Android and is available an:-</p>
<ul>
<li>Objective C library (IOS)</li>
<li>Java library (Android)</li>
<li>React Native library (IOS + Android)</li>
</ul>
<p>This document specifically for the Objective-C version of the library</p>
<h2>Requirements</h2>
<p>Currently the WiSDK has the following requirements:-</p>
<ul>
<li>IOS version 9.0+</li>
<li>XCode Version 9.0+</li>
</ul>
<p>It also requires, the following pods as dependencies</p>
<ul>
<li>AFNetworking Version 3.0+</li>
</ul>
<p>Note: push notification are only available on real IOS devices - they are not supported in IOS simulators (this is a simulator limitation)</p>
<h2>SDK Installation and Setup</h2>
<p>There are a few important steps to get out of the way when integrating Wi with your app for the first time. Follow these instructions carefully to ensure that you will have a smooth development experience.</p>
<h3>CocoaPods</h3>
<p>Before you begin, ensure that you have CocoaPods installed. If you are having troubles with CocoaPods, check out the troubleshooting guide.</p>
<div class="fragment"><div class="line">$ gem install cocoapods</div></div><!-- fragment --><h3>SDK Cocoapod</h3>
<p>WiSDK is available through <a href="https://cocoapods.org">CocoaPods</a>. To install it, simply add the following line to your Podfile:</p>
<div class="fragment"><div class="line">pod &#39;WiSDK&#39;</div></div><!-- fragment --><p>If this is not sufficient we can assist to setup manually</p>
<h3>APNS and Location Permission Setup</h3>
<p>While you are setting up your development and production apps, you need to configure them for push services. For detailed instructions on this process, please see the APNS Setup documentation. The APNS certificates must also be converted to PEM format and setup on the Wi servers. (this is usually part of the client setup on Wi servers)</p>
<p>Wi will ask for "Always and when in use location permissions" so that it can collect location information while the app is not in use. You will need to specify a description for NSLocationAlwaysAndWhenInUseUsageDescription in your info.plist to enable the asking for this permission.</p>
<p>NOTE: NSLocationWhenInUseUsageDescription can be specified if you don't want to allow such location gathering in backgroun but this will serverly limit what Wi is capable of.</p>
<p><b>IMPORTANT: do <em>NOT</em> set the background location checkbox on the background capabilities option. Wi does not use it and setting this will adversely affect battery life.</b></p>
<h2>Example</h2>
<p>To run the example project, clone the repo, and run <code>pod install</code> from the Example directory first. This example is useful as it has a project correctly configured to run Wi.</p>
<p>It is a bare bones project that will send location information from the device to the Wi Servers. It also has a demo provider key which can be used to send offers from wi to the device.</p>
<h2>Getting Started</h2>
<p>Welcome interruption is a platform for real time digital reach. By using the WiSDK you can turn any mobile application into an effective mobile marketting tool that can target customers based on their real time location.</p>
<p>To get started we need to explain some terminoloy. In Welcome Interruption there are a number of key entities:-</p>
<ul>
<li>Provider - A provider is the main entity which controls which offers gets sent to where, when and who. This is usually the owner of the users of the system (ie. the company that owns the app the Wi Sdk will be added too)</li>
<li>Place of interest (POI) - A defined geographic area that the provider sets up.</li>
<li>Event - A real time offer created by a Provider that is targeted to one or more POI's that they previously created</li>
<li>Users - A customer of the provider. Users can be anonymous and have a link to an external system or they can be full users (ie. email, name, etc)</li>
<li>Device - Links a phone and user to a provider. Contains reference to a user, current Lat/Lng of a phone as well as preferred notification mechanisms.</li>
<li>Campaign - the ability to target users/devices using external attributes as well as geo information.</li>
</ul>
<p>Typically to setup a Client in Welcome Interruption we do the following:-</p>
<ol type="1">
<li>add a provider to Welcome interruption and configure it with a campaign schema, external system intergration details and push certificates and API keys. This will require us to have your clients APNS push cerificates and any API key for Googles FCM serivce.</li>
<li>Once the provider is setup you will be provided with a provider key and certificate keys which <b>MUST</b> be specified as part of the WiSDK configuration.</li>
<li>Start Integrating the WiSDK</li>
</ol>
<h2>WiSDK integration</h2>
<p>Typically integration is done as follows:-</p>
<ol type="1">
<li>Configure SDK</li>
<li>Create listener / delegate (optional)</li>
<li>Start Wi up</li>
<li>Use the API to list offers, update profiles, etc (optional)</li>
</ol>
<p>Wi works silently in background sending location updates to our servers as users go about their daily business. You can even close the app and everything just keeps working</p>
<p>A minimal integration is just include the <a class="el" href="_t_e_s_w_i_app_8h_source.html">TESWiApp.h</a> header and adding code to the didFinishLaunchingWithOptions method in the app delegate.</p>
<div class="fragment"><div class="line">#import &quot;WiAppDelegate.h&quot;</div><div class="line">#import &quot;WiSDK/TESWIApp.h&quot;</div><div class="line"></div><div class="line">@implementation WiAppDelegate</div><div class="line"></div><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</div><div class="line">{</div><div class="line">    // the provider key this application is tied too (provider to you by 3es)</div><div class="line">    NSString * PROVIDER_KEY = @&quot;5b53e675ec8d831eb30242d3&quot;;</div><div class="line"></div><div class="line">    // first thing to do is create a configuration object and overwrite values to suit your environment.</div><div class="line">    // most defaults are sensible.</div><div class="line">    TESConfig * config = [[TESConfig alloc] initWithProviderKey:PROVIDER_KEY];</div><div class="line">    config.authAutoAuthenticate = YES;</div><div class="line">    config.authCredentials =</div><div class="line">           @&quot;anonymous_user&quot;: @YES,</div><div class="line">    };</div><div class="line">    config.deviceTypes = deviceTypeAPN | deviceTypeWallet;</div><div class="line"></div><div class="line">    // IOS has the concept of production and developement APNS servers - we need to ensure the right keys</div><div class="line">    // are setup if we are running in debug mode or production mode.</div><div class="line">#ifdef DEBUG</div><div class="line">    config.testPushProfile = @&quot;wisdk-example-aps-dev&quot;;  // test profile name (allocted by 3es)</div><div class="line">    config.pushProfile = @&quot;wisdk-example-aps-dev&quot;; // prod profile name (allocated by 3es)</div><div class="line">#endif</div><div class="line">#ifndef DEBUG</div><div class="line">    config.testPushProfile = @&quot;wisdk-example-aps-prod&quot;;  // test profile name (allocted by 3es)</div><div class="line">    config.pushProfile = @&quot;wisdk-example-aps-prod&quot;; // prod profile name (allocated by 3es)</div><div class="line">#endif</div><div class="line"></div><div class="line">    // next we create our singleton app object</div><div class="line">    TESWIApp * app = [TESWIApp manager];</div><div class="line"></div><div class="line">    // if we have a delegate listener class set it up here</div><div class="line">    app.delegate = self;</div><div class="line"></div><div class="line">     // start things up - this will setup push notificatons, setup fg and bg location montioring and authenticate</div><div class="line">     // with Wi servers.</div><div class="line">    [app start:config withLaunchOptions:launchOptions];</div><div class="line"></div><div class="line">    return YES;</div><div class="line">}</div></div><!-- fragment --><h3>configure</h3>
<p>Configuration is done completely through the <a class="el" href="interface_t_e_s_config.html">TESConfig</a> object. It is used to bind a provider with an app and describe how the WiSDK should interact with the device and Wi Servers.</p>
<p>Typically a config object is created at app startup and then passed to the <a class="el" href="interface_t_e_s_w_i_app.html">TESWIApp</a> object start method. The config object can set the sensitivty of geo regions monitored, how users and devices are created and the type of notification mechanism that should be used by the sdk</p>
<div class="fragment"><div class="line">TESConfig * config = [[TESConfig alloc] initWithProviderKey:PROVIDER_KEY];</div><div class="line">config.authAutoAuthenticate = YES;</div><div class="line">config.authCredentials =</div><div class="line">       @&quot;anonymous_user&quot;: @YES,</div><div class="line">       @&quot;external_id:: ”1234567890”,  // external system user/member id</div><div class="line">};</div><div class="line">config.deviceTypes = deviceTypeAPN | deviceTypeWallet;</div><div class="line">config.testPushProfile = @&quot;wisdk-example-aps-prod&quot;;  // test profile name (allocted by 3es)</div><div class="line">config.pushProfile = @&quot;wisdk-example-aps-prod&quot;; // prod profile name (allocated by 3es</div></div><!-- fragment --><h3>Listeners</h3>
<p>The WiSDK supports a protocol or listener class that can be used to get information about what the WiSDK is doing behind the scenes. Implmenting this protocol is optional but may be useful depending on the app you are integrating with.</p>
<p>this protocol is defined in WiSDK/TESWiApp.h as follows:-</p>
<div class="fragment"><div class="line">@@protocol TESWIAppDelegate &lt;NSObject&gt;</div><div class="line"></div><div class="line">    /*</div><div class="line">     sent when authorization has failed (401)</div><div class="line">    */</div><div class="line">    - (void) authorizeFailure: (NSInteger) httpStatus;</div><div class="line"></div><div class="line">    @@optional</div><div class="line"></div><div class="line">    /*</div><div class="line">     sent when authorization is complete</div><div class="line">    */</div><div class="line">    - (void) onAutoAuthenticate:(TESCallStatus)status withResponse: (nonnull NSDictionary *) responseObeject;</div><div class="line"></div><div class="line">    /*</div><div class="line">     sent when a new access token is returned</div><div class="line">    */</div><div class="line">    - (void) newAccessToken: (nullable NSString *) token;</div><div class="line"></div><div class="line">    /*</div><div class="line">     sent when a new device token has been created</div><div class="line">     */</div><div class="line">    - (void) newDeviceToken: (nullable NSString *) token;</div><div class="line"></div><div class="line">    /*</div><div class="line">      sent when a new push token is returned</div><div class="line">     */</div><div class="line">    - (void) newPushToken: (nullable NSString *) token;</div><div class="line"></div><div class="line">    /*</div><div class="line">      Called when a remmote notification needs to be processed</div><div class="line">     */</div><div class="line">    - (void) processRemoteNotification: (nullable NSDictionary *) userDictionary;</div><div class="line"></div><div class="line">    /*</div><div class="line">      Called when remote notifications is registered or fails to register</div><div class="line">     */</div><div class="line">    -(void) onRemoteNoficiationRegister:(TESCallStatus)status withResponse: (nonnull NSDictionary *) responseObeject;</div><div class="line"></div><div class="line">@@end</div></div><!-- fragment --><h3>Start Wi up</h3>
<p>The Wi SDK revolves around the <a class="el" href="interface_t_e_s_w_i_app.html">TESWIApp</a> singleton object. It is created once for an app and is used to for location monitoring, authentication with Wi servers, notification management and all sorts of communication to/from the Wi Servers.</p>
<div class="fragment"><div class="line">TESWIApp * app = [TESWIApp manager];</div><div class="line">app.delegate = self; // Only needed if you implement the listener protocol</div><div class="line">[app start:config withLaunchOptions:launchOptions];</div></div><!-- fragment --><p>NOTE: start asks for necessary permissions, registers push tokens and uses https to authenticate and communicate with the WI servers. It is asyncrohnous and in nature.</p>
<h3>Using thie API</h3>
<p>The remainder of the WiSDK wraps the Wi Rest based API. This API can be used to</p>
<ul>
<li>view live/historical events</li>
<li>events that have been taken up by this user</li>
<li>setting up inclusions/exclusions for event notification</li>
<li>searching for events</li>
</ul>
<h2>API documentation</h2>
<h2>Author</h2>
<p>Welcome Interruption and the WiSDK are developed by the 3-electric-sheep pty ltd.</p>
<p>for support please contact:-</p>
<p>pfrantz, <a href="#" onclick="location.href='mai'+'lto:'+'pfr'+'an'+'tz@'+'3-'+'ele'+'cr'+'ic-'+'sh'+'eep'+'.c'+'om'; return false;">pfran<span style="display: none;">.nosp@m.</span>tz@3<span style="display: none;">.nosp@m.</span>-elec<span style="display: none;">.nosp@m.</span>ric-<span style="display: none;">.nosp@m.</span>sheep<span style="display: none;">.nosp@m.</span>.com</a></p>
<h2>License</h2>
<p>WiSDK is available under the Apache license. See the LICENSE file for more info. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
